<meta name="viewport" charset=utf-8″ content="width=device-width, initial-scale=1, user-scalable=no" />
<html>

<head>
	<title>测试</title>
	<link rel="stylesheet" href="css/element.css">
</head>
<script type="text/javascript" src="js/vue.min.js"></script>
<script type="text/javascript" src="js/element.js"></script>
<script type="text/javascript" src="js/vue-clipboard.min.js"></script>
<script type="text/javascript" src="js/vue-resource.min.js"></script>
<script type="text/javascript" src="js/axios.min.js"></script>

<body>
	<div id="control">
		<el-card class="box-card">
			<center>
				<el-button type="primary" @click="regist">测试</el-button>
			</center>
		</el-card>
	</div>
</body>

<script>
	var vm = new Vue({
		el: '#control',
		data: {
			registform: {
				username: '',
				phone: '',
				password: '',
				checkpwd: '',
			},
			tips: ['', '', '', '', '', ''],
			registflag: 1,
		},
		methods: {
			regist() {
				console.log(localStorage['username'])
				console.log(localStorage['token'])
				this.$axios({
					methods: 'get',
					url: 'http://localhost:8080',
					headers: {
						'token': localStorage['token']
					}
				})
				.then((res) => {
					console.log(res);
					console.log('success');
				})
				.catch((res)=>{
					console.log(res);
					console.log('fail')
				})
			},
		},
		watch: {
			'registform.username'(val) {
				val.length < 6 || val.length > 20 ? this.tips[0] = '用户名必须为6-20位' : this.tips[0] = '';
				this.checkform()
			},
			'registform.phone'(val) {
				if (!(/^1[3456789]\d{9}$/.test(val))) {
					this.tips[1] = '手机号格式有误'
				}
				else {
					this.tips[1] = ''
				}
				this.checkform()
			},
			'registform.password'(val) {
				val.length < 6 || val.length > 20 ? this.tips[2] = '密码必须为6-20位' : this.tips[2] = '';
				val != this.registform.checkpwd ? this.tips[3] = '两次密码输入不一致' : this.tips[3] = ''
				this.checkform()
			},
			'registform.checkpwd'(val) {
				if (this.registform.password != '') {
					val != this.registform.password ? this.tips[3] = '两次密码输入不一致' : this.tips[3] = ''
				}
				else {
					this.tips[3] = ''
				}
				this.checkform()
			},
		}
	});
</script>

<style>
	.input {
		width: 250px;
	}

	.tips {
		color: red;
		font-size: 13px;
		float: right;
		text-align: left;
		margin-top: -30px;
		margin-left: 200px;
	}

	.clearfix:before,
	.clearfix:after {
		display: table;
		content: "";
	}

	.clearfix:after {
		clear: both
	}

	.box-card {
		width: 500px;
	}
</style>

</html>